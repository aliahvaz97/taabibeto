{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import axios from'axios';import\"./PaymentPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PaymentPage=()=>{const[name,setName]=useState('');const[email,setEmail]=useState('');const[phone,setPhone]=useState('');const[amount,setAmount]=useState(0);const location=useLocation();const queryParams=new URLSearchParams(location.search);const price=queryParams.get('price');useEffect(()=>{if(price){setAmount(parseInt(price,10));}},[price]);const handleSubmit=async event=>{event.preventDefault();try{const response=await axios.post('https://api.zarinpal.com/pg/v4/payment/request.json',{amount:amount,description:'پرداخت بابت خدمات پرستاری',email:email,phone:phone,callbackUrl:'http://yourwebsite.com/callback'});if(response.data.status===100){window.location.href=`https://www.zarinpal.com/pg/StartPay/${response.data.authority}`;}else{console.error('خطا در دریافت لینک پرداخت:',response.data.message);}}catch(error){console.error('خطا در درخواست پرداخت:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"payment-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0635\\u0641\\u062D\\u0647 \\u067E\\u0631\\u062F\\u0627\\u062E\\u062A\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0646\\u0627\\u0645 \\u0648 \\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0622\\u062F\\u0631\\u0633 \\u0627\\u06CC\\u0645\\u06CC\\u0644:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u062A\\u0645\\u0627\\u0633:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:phone,onChange:e=>setPhone(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0645\\u0628\\u0644\\u063A \\u067E\\u0631\\u062F\\u0627\\u062E\\u062A\\u06CC:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,readOnly:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u067E\\u0631\\u062F\\u0627\\u062E\\u062A\"})]})]});};export default PaymentPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","axios","jsx","_jsx","jsxs","_jsxs","PaymentPage","name","setName","email","setEmail","phone","setPhone","amount","setAmount","location","queryParams","URLSearchParams","search","price","get","parseInt","handleSubmit","event","preventDefault","response","post","description","callbackUrl","data","status","window","href","authority","console","error","message","className","children","onSubmit","type","value","onChange","e","target","required","readOnly"],"sources":["C:/Users/vipim/taabibeto/client/src/PaymentPage/PaymentPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport \"./PaymentPage.css\";\n\nconst PaymentPage = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [amount, setAmount] = useState(0);\n\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const price = queryParams.get('price');\n\n  useEffect(() => {\n    if (price) {\n      setAmount(parseInt(price, 10));\n    }\n  }, [price]);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post('https://api.zarinpal.com/pg/v4/payment/request.json', {\n        amount: amount,\n        description: 'پرداخت بابت خدمات پرستاری',\n        email: email,\n        phone: phone,\n        callbackUrl: 'http://yourwebsite.com/callback'\n      });\n\n      if (response.data.status === 100) {\n        window.location.href = `https://www.zarinpal.com/pg/StartPay/${response.data.authority}`;\n      } else {\n        console.error('خطا در دریافت لینک پرداخت:', response.data.message);\n      }\n    } catch (error) {\n      console.error('خطا در درخواست پرداخت:', error);\n    }\n  };\n\n  return (\n    <div className=\"payment-page\">\n      <h1>صفحه پرداخت</h1>\n      <form onSubmit={handleSubmit}>\n        <label>\n          نام و نام خانوادگی:\n          <input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} required />\n        </label>\n        <label>\n          آدرس ایمیل:\n          <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required />\n        </label>\n        <label>\n          شماره تماس:\n          <input type=\"text\" value={phone} onChange={(e) => setPhone(e.target.value)} required />\n        </label>\n        <label>\n          مبلغ پرداختی:\n          <input type=\"number\" value={amount} readOnly />\n        </label>\n        <button type=\"submit\">پرداخت</button>\n      </form>\n    </div>\n  );\n};\n\nexport default PaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}